<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="company_management.GroupedListRenderer" t-inherit="web.ListRenderer" t-inherit-mode="primary">

        <!-- Replace entire thead when we have grouped headers -->
        <xpath expr="//thead" position="replace">
            <thead>
                <t t-if="hasGroupedHeaders">
                    <t t-call="company_management.ListRenderer.Header">
                        <t t-set="columns" t-value="headerColumns1"/>
                        <t t-set="allowSelectors" t-value="hasSelectors"/>
                        <t t-set="selectorColspan" t-value="2"/>
                    </t>
                    <t t-call="company_management.ListRenderer.Header">
                        <t t-set="columns" t-value="headerColumns2"/>
                        <t t-set="allowSelectors" t-value="0"/>
                    </t>
                </t>
                <t t-else="">
                    <t t-call="company_management.ListRenderer.Header"/>
                </t>
            </thead>
        </xpath>

    </t>

    <t t-name="company_management.ListRenderer.Header">
        <tr>
            <th t-att-rowspan="selectorColspan || 1" t-if="allowSelectors" class="o_list_record_selector o_list_controller align-middle pe-1 cursor-pointer" tabindex="-1" t-on-keydown="(ev) => this.onCellKeydown(ev)" t-on-click.stop="toggleSelection">
                <CheckBox disabled="!_canSelectRecord" value="selectAll" className="'d-flex m-0'" onChange.bind="toggleSelection"/>
            </th>
            <t t-foreach="columns" t-as="column" t-key="column.id">
                <th t-if="column.type === 'field_group'"
                    t-att-data-name="column.name"
                    t-att-class="column.groupClass"
                    t-att-colspan="column.colspan || 1"
                    t-att-rowspan="column.rowspan || 1"
                >
                    <span class="text-center d-block min-w-0 text-truncate flex-grow-1 flex-shrink-1" t-att-class="isNumeric ? 'o_list_number_th' : ''"
                                    t-esc="column.label"/>
                </th>
                <th t-elif="column.type === 'field'"
                    t-att-data-name="column.name"
                    t-att-class="getColumnClass(column) + ' opacity-trigger-hover w-print-auto'"
                    t-on-pointerup="onColumnTitleMouseUp"
                    t-on-click="() => this.onClickSortColumn(column)"
                    t-on-keydown="(ev) => this.onCellKeydown(ev)"
                    data-tooltip-delay="1000"
                    t-att-colspan="column.colspan || 1"
                    t-att-rowspan="column.rowspan || 1"
                    tabindex="-1">
                    <t t-if="column.hasLabel and column.widget !== 'handle'">
                    <t t-set="isNumeric" t-value="isNumericColumn(column)"/>
                        <div class="d-flex"
                            t-att-data-tooltip-template="isDebugMode ? 'web.FieldTooltip' : 'web.ListHeaderTooltip'"
                            t-att-data-tooltip-info="makeTooltip(column)">
                            <span class="text-center d-block min-w-0 text-truncate flex-grow-1 flex-shrink-1" t-att-class="isNumeric ? 'o_list_number_th' : ''"
                                    t-esc="column.label"/>
                            <div class="o_list_header_label_spacer"/>
                            <i class="o_list_sortable_caret" t-att-class="getSortableIconClass(column)"/>
                        </div>
                        <span
                                class="o_resize position-absolute top-0 end-0 bottom-0 ps-1 bg-black-25 opacity-0 opacity-50-hover z-1"
                                t-on-pointerdown.stop.prevent="this.columnWidths.onStartResize"/>
                    </t>
                </th>
                <th rowspan="2" t-att-class="column.groupClass" t-att-colspan="column.colspan || 1" t-att-rowspan="column.rowspan || 1" class="align-middle" t-else="">
                    <span class="text-center d-block min-w-0 text-truncate flex-grow-1 flex-shrink-1" t-att-class="isNumeric ? 'o_list_number_th' : ''">
                        Action
                    </span>
                </th>
            </t>
            <th t-if="hasActionsColumn and allowSelectors" rowspan="2" t-on-keydown="(ev) => this.onCellKeydown(ev)" class="o_list_controller o_list_actions_header w-print-0 p-print-0 position-sticky end-0">
                <div t-if="displayOptionalFields or hasOptionalOpenFormViewColumn" class="o_optional_columns_dropdown d-print-none text-center border-top-0">
                    <Dropdown position="'bottom-end'">
                        <button class="btn p-0" tabindex="-1">
                            <i class="o_optional_columns_dropdown_toggle oi oi-fw oi-settings-adjust"/>
                        </button>

                        <t t-set-slot="content">
                            <t t-foreach="optionalFieldGroups" t-as="group" t-key="group_index">
                                <div t-if="!group_first" role="separator" class="dropdown-divider"/>
                                <DropdownItem t-if="group.displayName" closingMode="'none'" onSelected="() => this.toggleOptionalFieldGroup(group.id)">
                                    <div class="fw-bold" t-esc="group.displayName"/>
                                </DropdownItem>
                                <t t-foreach="group.optionalFields" t-as="field" t-key="field_index">
                                    <DropdownItem closingMode="'none'" onSelected="() => this.toggleOptionalField(field.name)">
                                        <CheckBox
                                            onChange="() => this.toggleOptionalField(field.name)"
                                            value="field.value"
                                            name="field.name"
                                        >
                                            <span class="d-flex align-items-center"><span class="text-truncate" t-esc="field.label"/><span class="ps-1" t-if="env.debug" t-esc="' (' + field.name + ')'" /></span>
                                        </CheckBox>
                                    </DropdownItem>
                                </t>
                            </t>
                            <div t-if="hasOptionalOpenFormViewColumn" role="separator" class="dropdown-divider"/>
                            <DropdownItem t-if="hasOptionalOpenFormViewColumn" closingMode="'none'" onSelected="() => this.toggleDebugOpenView()">
                                <CheckBox
                                    onChange="() => this.toggleDebugOpenView()"
                                    value="this.debugOpenView"
                                    name="'View Button'"
                                >
                                    <span class="d-flex align-items-center"><span class="text-truncate">View Button</span></span>
                                </CheckBox>
                            </DropdownItem>
                        </t>
                    </Dropdown>
                </div>
            </th>
        </tr>
    </t>

</templates>