<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="robotia_document_extractor.SettingsDashboard">
        <div class="settings-dashboard">
            <t t-if="state.loading">
                <div class="d-flex justify-content-center p-5">
                    <div class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </t>

            <t t-else="">
                <!-- Header Section -->
                <div class="settings-header">
                    <div class="settings-header-text">
                        <h1>Extraction Settings</h1>
                        <p class="text-muted">Configure AI models, cloud integrations, and system access for automated document processing</p>
                    </div>
                    <div class="settings-header-actions" t-if="state.activeTab === 'AI'">
                        <button
                            type="button"
                            class="btn btn-outline-secondary"
                            t-on-click="handleCancel"
                            t-att-disabled="!state.hasChanges">
                            Cancel
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            t-on-click="handleSave"
                            t-att-disabled="!state.hasChanges">
                            <i class="fa fa-save me-1"></i>
                            Save Changes
                        </button>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="settings-tabs">
                    <t t-foreach="tabs" t-as="tab" t-key="tab.name">
                        <button
                            type="button"
                            t-att-class="getTabClass(tab.name)"
                            t-on-click="() => this.switchTab(tab.name)">
                            <i t-att-class="'fa ' + tab.icon + ' me-2'"></i>
                            <t t-esc="tab.label"/>
                        </button>
                    </t>
                </div>

                <!-- Tab Content -->
                <div class="settings-content">
                    <UsersTab t-if="state.activeTab === 'USERS'"/>
                    <AITab
                        t-if="state.activeTab === 'AI'"
                        onDirtyChange.bind="handleDirtyChange"
                        onSaveRequest.bind="handleSaveRequest"
                        onCancelRequest.bind="handleCancelRequest"/>
                    <BackupTab t-if="state.activeTab === 'BACKUP'"/>
                    <LogsTab t-if="state.activeTab === 'LOGS'"/>
                </div>
            </t>
        </div>
    </t>
</templates>
