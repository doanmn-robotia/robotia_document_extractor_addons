// Extraction Form View Styles
// Split view with PDF preview on the right (desktop)
// Stacked view on mobile/tablet

.o_form_view.o_form_extraction_split {

    // Form renderer should be flex container
    .o_form_renderer {
        display: flex;
        height: 100%;
        overflow: hidden;
        width: 100%;

        flex-direction: row !important;

        .o_notebook {

            th > div > span {
                white-space: break-spaces;
                text-align: center;
            }

            th.o_handle_cell {
                width: 40px !important;
            }

            // STICKY HEADER: Apply to all tables in extraction form
            .o_list_table {

                --table-bg: transparent !important;

                thead {
                    position: sticky;
                    top: 0;
                    z-index: 10;
                    background-color: #f8fafc; // Prevent transparency when scrolling
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); // Subtle shadow for depth
                }

                thead th {
                    background-color: #f8fafc; // Ensure header background
                }

                // ZEBRA STRIPING: Alternating row colors for all tables
                tbody tr:not(.o_is_section) {
                    &:nth-child(even) {
                        background-color: #dee2e6; // White for even rows
                    }

                    &:nth-child(odd) {
                        background-color: #f9fafb; // Very light gray for odd rows (gray-50)
                    }

                    &:hover {
                        background-color: #f0f4f8 !important; // Light blue-gray on hover
                    }
                }
            }

            .o_list_renderer {
                max-height: 500px;
            }
        }

        // Form sheet container (left panel on desktop, top on mobile)
        >.o_form_sheet_bg {
            min-width: 0; // Allow shrinking below content size
            overflow-y: auto;
            overflow-x: hidden; // Prevent horizontal scroll

            // RESPONSIVE: Mobile - Full width, auto height
            @media (max-width: 991px) {
                width: 100%;
                height: auto;
                min-height: 400px;
            }

            // RESPONSIVE: Desktop - Flexible width, full height
            @media (min-width: 992px) {
                height: 100%;
            }
        }

        // PDF preview container (right side on desktop, bottom on mobile)
        >.o_pdf_preview,
        >.o-pdf-container {
            min-width: 0; // Allow shrinking below content size
            overflow-y: auto;
            overflow-x: hidden; // Prevent horizontal scroll
            background-color: #f8fafc; // slate-50
            padding: 10px;

            .o_notebook {
                margin: 0 !important;

                .nav-tabs {
                    margin-bottom: 0 !important;
                }
            }

            // RESPONSIVE: Mobile - Full width, fixed height, top border
            @media (max-width: 991px) {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e2e8f0; // slate-200
            }

            // RESPONSIVE: Desktop - Flexible width, full height, left border
            @media (min-width: 992px) {
                height: 100%;
                border-left: 1px solid #e2e8f0; // slate-200
            }

            .o_notebook {
                height: 100%;

                .nav-tabs {
                    border-bottom: 1px solid #e2e8f0;
                    margin-bottom: 1rem;

                    .nav-link {
                        color: #64748b; // slate-500
                        border: none;
                        border-bottom: 2px solid transparent;

                        &.active {
                            color: #2563eb; // blue-600
                            border-bottom-color: #2563eb;
                            background: none;
                        }

                        &:hover:not(.active) {
                            color: #1e293b; // slate-800
                            background-color: #f1f5f9; // slate-100
                        }
                    }
                }

                .tab-content {
                    height: calc(100% - 60px);

                    .tab-pane {
                        height: 100%;

                        iframe {
                            width: 100%;
                            height: 100%;
                            border: 1px solid #e2e8f0;
                            border-radius: 0.5rem;
                            background: white;
                        }
                    }

                    .tab-pane:has(.o_pdf_preview_content) {
                        padding: 0 !important;
                    }
                }
            }
        }

        // Split.js gutter styling (desktop only)
        .gutter {
            background-color: #cbd5e1; // slate-300
            background-repeat: no-repeat;
            background-position: center;
            transition: all 0.2s ease;
            flex-shrink: 0; // Prevent gutter from shrinking
            position: relative;

            // RESPONSIVE: Hide on mobile (no split)
            @media (max-width: 991px) {
                display: none;
            }

            &:hover {
                background-color: #94a3b8; // slate-400
            }

            &.gutter-horizontal {
                cursor: col-resize;
                width: 10px !important; // Force width

                // Add visible grip indicator
                &::before {
                    content: '';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 4px;
                    height: 40px;
                    background: linear-gradient(to bottom,
                            transparent 0%,
                            #64748b 25%,
                            #64748b 75%,
                            transparent 100%);
                    border-radius: 2px;
                    pointer-events: none;
                }

                &:hover::before {
                    background: linear-gradient(to bottom,
                            transparent 0%,
                            #1e293b 25%,
                            #1e293b 75%,
                            transparent 100%);
                }
            }
        }

        .o_form_pdf_controls {
            display: none !important;
        }
    }
}

// PDF Viewer Widget Enhancements
.o_pdf_preview_content {
    height: 100%;
    position: relative; // Required for OCR highlight overlay positioning
}

.o_field_pdf_viewer {
    height: 100%;

    iframe {
        width: 100%;
        height: 100% !important;
        border: none;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

        // RESPONSIVE: Mobile - min height for usability
        @media (max-width: 991px) {
            min-height: 400px;
        }
    }
}

// RESPONSIVE: Global form adjustments for mobile
@media (max-width: 991px) {
    .o_form_view.o_form_extraction_split {

        // Ensure form takes full viewport on mobile
        .o_content {
            padding: 0.5rem;
        }

        // Make form sheet full width
        .o_form_sheet_bg {
            .o_form_sheet {
                max-width: 100%;
                padding: 1rem;
            }
        }

        // Adjust statusbar for mobile
        .o_form_statusbar {
            .o_statusbar_status {
                flex-wrap: wrap;

                .o_arrow_button {
                    font-size: 0.85rem;
                    padding: 0.35rem 0.75rem;
                }
            }
        }
    }
}